<main>
    <!-- Header will be inserted server-side -->
    <div id="content">
    <h1>Create a New Listing</h1>


    <form id="createListingForm" method="POST">
        <span class="field">
            <label>Name:</label>
            <input type="text" name="name" required />
        </span>
         <br>

        <span class="field">
            <label>Capacity:</label>
            <input type="number" name="capacity" min="1" required />
        </span>
         <br>

        <span class="field">
            <label>Location:</label>
            <input type="text" name="location" required />
        </span>
         <br>

        <label>Available Time Slots (comma separated):</label><br><br>
        <input type="text" name="timeslots" placeholder="e.g. 2pm, 3pm, 4pm" required />
        <br><br>

        <button type="submit" onclick="addListing()">Create Listing</button>
    </form>
    </div>


<script>
    function addListing() {
        var name = document.getElementsByName("name")[0].value;
        var capacity = document.getElementsByName("capacity")[0].value;
        var location = document.getElementsByName("location")[0].value;
        var timeslots = document.getElementsByName("timeslots")[0].value.split(',').map(s => s.trim());
        fetch("/listing/new", {
            method: 'POST', 
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({name, capacity, location, timeslots})
        });
        // Clear form
        document.getElementsByName("name")[0].value = "";
        document.getElementsByName("capacity")[0].value = "";
        document.getElementsByName("location")[0].value = "";
        document.getElementsByName("timeslots")[0].value = "";
    }
    // Example JS hook
    document.getElementById('createListingForm').onsubmit = () => {
    console.log('Submitting listing...');
    };
</script>
</main>

<style>
    main {
        padding: 20px;
        font-size: 20;
    }
    .field {
		width: 25vw;
		display: flex;
		direction: row;
		justify-content: space-between;
	}
</style>
